{"ast":null,"code":"import _slicedToArray from\"/Users/failop/Documents/UF/SeniorP/project/proj/Front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import\"./../../css/Register2.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];useEffect(function(){if(localStorage.getItem('token')!==null){console.log(\"this happen\");window.location.replace('http://localhost:3000/');}else{setLoading(false);}},[]);var onSubmit=function onSubmit(e){e.preventDefault();var userR=new FormData();userR.append(\"username\",user);userR.append(\"password\",password);var requestOptions={method:'POST',body:userR,redirect:'follow'};fetch(\"https://stock-pipeli-users-fje2brrt8yy.herokuapp.com/login/\",requestOptions)// .then(response => response.text())\n.then(function(response){return response.json();})// .then(result => console.log(\"This is a token \", result.token))\n.then(function(result){if(result){localStorage.clear();localStorage.setItem('token',result.token);console.log(\"The token is here \",typeof result);console.log(\"The token here is a \",result.token);window.location.replace('http://localhost:3000/');}else{console.log(\"Else haopen\");setEmail('');setPassword('');localStorage.clear();setErrors(true);}}).catch(function(error){console.log('there is an error',error);setErrors(true);});};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reg_box\",children:[loading===false&&/*#__PURE__*/_jsx(\"h1\",{className:\"reg_text0\",children:\" Login \"}),errors===true?/*#__PURE__*/_jsx(\"h2\",{className:\"reg_box_text0\",children:\"Cannot log in with provided credentials\"}):/*#__PURE__*/_jsx(\"div\",{}),loading===false&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reg_box2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reg_box3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reg_text\",children:\"User: \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg_box3\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"reg_Base2\",name:\"user\",type:\"text\",value:user,required:true,onChange:function onChange(e){return setUser(e.target.value);}}),' ']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg_box2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reg_box3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reg_text\",children:\"Password: \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg_box3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"reg_Base2\",name:\"password\",type:\"password\",value:password,required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),' ']})]}),user!=''&&password!=''?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-5\",children:\"Submit\"}):/*#__PURE__*/_jsx(\"div\",{})]})]})})});};export default Login;","map":{"version":3,"sources":["/Users/failop/Documents/UF/SeniorP/project/proj/Front_end/src/Component/auth/Log_in.js"],"names":["React","useState","useEffect","Login","email","setEmail","user","setUser","password","setPassword","errors","setErrors","loading","setLoading","localStorage","getItem","console","log","window","location","replace","onSubmit","e","preventDefault","userR","FormData","append","requestOptions","method","body","redirect","fetch","then","response","json","result","clear","setItem","token","catch","error","target","value"],"mappings":"gLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,MAAO,2BAAP,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,eACQF,QAAQ,CAAC,EAAD,CADhB,wCACXG,KADW,eACJC,QADI,8BAEMJ,QAAQ,CAAC,EAAD,CAFd,yCAEXK,IAFW,eAELC,OAFK,8BAGcN,QAAQ,CAAC,EAAD,CAHtB,yCAGXO,QAHW,eAGDC,WAHC,8BAIUR,QAAQ,CAAC,KAAD,CAJlB,yCAIXS,MAJW,eAIHC,SAJG,8BAKYV,QAAQ,CAAC,IAAD,CALpB,0CAKXW,OALW,gBAKFC,UALE,gBAOlBX,SAAS,CAAC,UAAM,CACd,GAAIY,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAkC,IAAtC,CAA4C,CAC1CC,OAAO,CAACC,GAAR,CAAY,aAAZ,EACAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,wBAAxB,EACD,CAHD,IAGO,CACLP,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAPQ,CAON,EAPM,CAAT,CASA,GAAMQ,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,CAAI,CACpBA,CAAC,CAACC,cAAF,GAEA,GAAIC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,QAAJ,EAAZ,CACAD,KAAK,CAACE,MAAN,CAAa,UAAb,CAAyBpB,IAAzB,EACAkB,KAAK,CAACE,MAAN,CAAa,UAAb,CAAyBlB,QAAzB,EAEA,GAAImB,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,IAAI,CAAEL,KAFa,CAGnBM,QAAQ,CAAE,QAHS,CAArB,CAMAC,KAAK,CAAC,6DAAD,CAAgEJ,cAAhE,CACH;AADF,CAEGK,IAFH,CAEQ,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAFhB,CAGE;AAHF,CAIGF,IAJH,CAIQ,SAASG,MAAT,CAAgB,CACpB,GAAIA,MAAJ,CAAY,CACVrB,YAAY,CAACsB,KAAb,GACAtB,YAAY,CAACuB,OAAb,CAAqB,OAArB,CAA8BF,MAAM,CAACG,KAArC,EACAtB,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAmC,MAAOkB,CAAAA,MAA1C,EACAnB,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAqCkB,MAAM,CAACG,KAA5C,EAEApB,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,wBAAxB,EACD,CAPD,IAOO,CACLJ,OAAO,CAACC,GAAR,CAAY,aAAZ,EACAZ,QAAQ,CAAC,EAAD,CAAR,CACAI,WAAW,CAAC,EAAD,CAAX,CACAK,YAAY,CAACsB,KAAb,GACAzB,SAAS,CAAC,IAAD,CAAT,CACD,CACF,CAnBH,EAoBG4B,KApBH,CAoBS,SAASC,KAAT,CACL,CACExB,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCuB,KAAjC,EACA7B,SAAS,CAAC,IAAD,CAAT,CACD,CAxBL,EAyBD,CAtCD,CAwCA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACI,eAAQ,SAAS,CAAC,YAAlB,uBACI,aAAK,SAAS,CAAC,SAAf,WACCC,OAAO,GAAK,KAAZ,eAAqB,WAAI,SAAS,CAAC,WAAd,qBADtB,CAECF,MAAM,GAAK,IAAX,cAAkB,WAAI,SAAS,CAAC,eAAd,qDAAlB,cAA8F,cAF/F,CAGCE,OAAO,GAAK,KAAZ,eACG,cAAM,QAAQ,CAAES,QAAhB,wBACI,aAAK,SAAS,CAAC,UAAf,wBACA,YAAK,SAAS,CAAC,UAAf,uBACE,YAAK,SAAS,CAAC,UAAf,oBADF,EADA,cAIA,aAAK,SAAS,CAAC,UAAf,wBAEI,aAFJ,cAGQ,cAAO,SAAS,CAAC,WAAjB,CAA6B,IAAI,CAAC,MAAlC,CACI,IAAI,CAAC,MADT,CACgB,KAAK,CAAEf,IADvB,CAEI,QAAQ,KAFZ,CAEa,QAAQ,CAAE,kBAAAgB,CAAC,QAAIf,CAAAA,OAAO,CAACe,CAAC,CAACmB,MAAF,CAASC,KAAV,CAAX,EAFxB,EAHR,CAMW,GANX,GAJA,GADJ,cAgBI,aAAK,SAAS,CAAC,UAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACA,YAAK,SAAS,CAAC,UAAf,wBADA,EADJ,cAII,aAAK,SAAS,CAAC,UAAf,wBAEI,cAAO,SAAS,CAAC,WAAjB,CACI,IAAI,CAAC,UADT,CACoB,IAAI,CAAC,UADzB,CACoC,KAAK,CAAElC,QAD3C,CAEI,QAAQ,KAFZ,CAEa,QAAQ,CAAE,kBAAAc,CAAC,QAAIb,CAAAA,WAAW,CAACa,CAAC,CAACmB,MAAF,CAASC,KAAV,CAAf,EAFxB,EAFJ,CAKO,GALP,GAJJ,GAhBJ,CA6BCpC,IAAI,EAAE,EAAN,EAAYE,QAAQ,EAAE,EAAtB,cACG,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,sBAAhC,oBADH,cAKG,cAlCJ,GAJJ,GADJ,EADJ,EADF,CAkDD,CA1GD,CA4GA,cAAeL,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport \"./../../css/Register2.css\"\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [user, setUser] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem('token') !== null) {\n      console.log(\"this happen\")\n      window.location.replace('http://localhost:3000/');\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    var userR = new FormData();\n    userR.append(\"username\", user);\n    userR.append(\"password\", password);\n\n    var requestOptions = {\n      method: 'POST',\n      body: userR,\n      redirect: 'follow'\n    };\n\n    fetch(\"https://stock-pipeli-users-fje2brrt8yy.herokuapp.com/login/\", requestOptions)\n      // .then(response => response.text())\n      .then(response => response.json())\n      // .then(result => console.log(\"This is a token \", result.token))\n      .then(function(result){\n        if (result) {\n          localStorage.clear();\n          localStorage.setItem('token', result.token);\n          console.log(\"The token is here \" , typeof(result))\n          console.log(\"The token here is a \" , result.token)\n\n          window.location.replace('http://localhost:3000/');\n        } else {\n          console.log(\"Else haopen\")\n          setEmail('');\n          setPassword('');\n          localStorage.clear();\n          setErrors(true);\n        }\n      })\n      .catch(function(error)\n        {  \n          console.log('there is an error', error)\n          setErrors(true)\n        });\n  };\n\n  return (\n    <div className=\"App\">\n        <header className=\"App-header\">\n            <div className=\"reg_box\">\n            {loading === false && <h1 className=\"reg_text0\"> Login </h1>}\n            {errors === true ? <h2 className=\"reg_box_text0\">Cannot log in with provided credentials</h2>: <div></div> }\n            {loading === false && (\n                <form onSubmit={onSubmit}>\n                    <div className=\"reg_box2\">\n                    <div className=\"reg_box3\">\n                      <div className=\"reg_text\">User: </div>\n                    </div>\n                    <div className=\"reg_box3\">\n                {/* <label htmlFor='email'>Email address:</label>  */}\n                        <br />\n                            <input className=\"reg_Base2\" name='user'\n                                type='text' value={user}\n                                required onChange={e => setUser(e.target.value)}\n                            />{' '}\n                        </div>\n                    </div>\n                    {/* <br /> */}\n\n                    <div className=\"reg_box2\">\n                        <div className=\"reg_box3\">\n                        <div className=\"reg_text\">Password: </div>\n                        </div>\n                        <div className=\"reg_box3\">\n                            {/* <label htmlFor='password'>Password:</label> <br /> */}\n                            <input className=\"reg_Base2\" \n                                name='password' type='password' value={password}\n                                required onChange={e => setPassword(e.target.value)}\n                            />{' '}\n                        </div>\n                    </div>\n                {/* <br /> */}\n                {user!='' && password!=''?\n                    <button type=\"submit\" className=\"btn btn-primary mb-5\" > \n                            Submit \n                    </button> \n                    :\n                    <div></div>\n                 }\n                {/* <input type='submit' value='Login' /> */}\n                </form>\n            )}\n        </div>\n      </header>\n    </div>\n  );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}